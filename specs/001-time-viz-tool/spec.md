# Feature Specification: 一日時間視覺化工具

**Feature Branch**: `001-time-viz-tool`  
**Created**: 2025-12-23  
**Status**: Draft  
**Input**: User description: "根據現有的 SPEC.md 內容,建立「一日時間視覺化工具」的 feature 規格。這是一個網頁版視覺化工具,幫助使用者以「時間容量」概念規劃一天的任務。使用者透過建立時間區塊並拖曳到「一天」容器中,直觀感受時間負荷。"

## Overview

一日時間視覺化工具是一個網頁版的視覺化工具，幫助使用者以「時間容量」的概念規劃一天的任務。與傳統的待辦清單或行事曆不同，本工具強調「一天能裝多少」而非「幾點做什麼」，讓使用者透過視覺化的時間區塊直觀地感受時間負荷，進行無壓力的任務規劃。

**核心理念**：
- 時間視覺化：任務不是列表，而是有「體積」的區塊
- 容量感知：重點是一天的容量限制，而非精確時刻
- 無壓力規劃：不評價、不限制，純粹的規劃輔助

## User Scenarios & Testing *(mandatory)*

### User Story 1 - 建立並視覺化時間區塊 (Priority: P1)

使用者開啟工具後，輸入任務名稱（例如「寫報告」）並選擇預估時長（例如 2 小時），系統立即產生一個對應大小的時間區塊，放置在任務池中等待使用者規劃。

**Why this priority**: 這是工具的核心功能，沒有任務區塊就無法進行任何規劃。這個功能本身就能讓使用者開始體驗「時間視覺化」的概念。

**Independent Test**: 使用者可以獨立測試此功能，只需建立 3-5 個不同時長的任務，觀察區塊大小是否正確反映時長差異，即可驗證核心價值。

**Acceptance Scenarios**:

1. **Given** 使用者在任務建立區，**When** 輸入任務名稱「寫報告」並選擇「2小時」後點擊「新增」，**Then** 任務池中出現標示「寫報告 / 2hr」的時間區塊，且區塊大小為 1 小時區塊的兩倍
2. **Given** 使用者已建立多個任務，**When** 查看任務池，**Then** 可清楚辨識每個區塊的任務名稱與時長，且不同時長的區塊有明顯的大小差異
3. **Given** 使用者建立 0.5 小時的任務，**When** 與 4 小時的任務並列，**Then** 視覺上 4 小時區塊的高度是 0.5 小時的 8 倍

---

### User Story 2 - 拖曳區塊進行規劃 (Priority: P1)

使用者將任務池中的時間區塊拖曳到「今日容器」中，區塊會依序堆疊，使用者可直觀看出已規劃的任務佔用多少時間容量。

**Why this priority**: 拖曳互動是「容量感知」的關鍵體驗，讓使用者透過視覺化的堆疊直接感受一天的負荷，是工具區別於傳統清單的核心價值。

**Independent Test**: 使用者建立 3 個任務（分別為 2hr、1hr、1.5hr）並全部拖入今日容器，觀察區塊是否依序堆疊，以及視覺上是否能立即判斷總時長，即可驗證功能價值。

**Acceptance Scenarios**:

1. **Given** 任務池中有「寫報告 2hr」區塊，**When** 使用者拖曳該區塊到今日容器，**Then** 區塊出現在容器中，從底部開始填充
2. **Given** 今日容器已有「寫報告 2hr」，**When** 使用者再拖入「開會 1hr」，**Then** 新區塊堆疊在前一個區塊之上，視覺上呈現累加效果
3. **Given** 使用者拖入多個區塊直到超過容器高度（假設容器代表 16 小時），**When** 總時長超過容器容量，**Then** 區塊溢出容器但不被阻擋，讓使用者視覺上感受「超載」

---

### User Story 3 - 調整與移除任務 (Priority: P2)

使用者可以從今日容器中移除區塊（拖回任務池或刪除），也可以刪除任務池中的區塊，靈活調整規劃直到滿意。

**Why this priority**: 調整能力讓使用者可以快速試驗不同的規劃組合，符合「無壓力規劃」的設計原則，雖非核心但對使用體驗至關重要。

**Independent Test**: 使用者建立 5 個任務並全部拖入今日容器，然後移除其中 2 個，觀察操作是否流暢且視覺回饋清晰，即可驗證功能完整性。

**Acceptance Scenarios**:

1. **Given** 今日容器中有「寫報告 2hr」，**When** 使用者拖曳該區塊回任務池，**Then** 區塊從容器消失並重新出現在任務池，容器內剩餘區塊自動重新排列
2. **Given** 任務池中有「運動 1hr」，**When** 使用者點擊區塊的刪除按鈕，**Then** 該區塊永久消失
3. **Given** 今日容器中有多個區塊，**When** 使用者移除中間的某個區塊，**Then** 剩餘區塊自動向下填充空隙，保持連續堆疊

---

### User Story 4 - 資料持久化 (Priority: P2)

使用者關閉瀏覽器後重新開啟工具，之前建立的任務與今日規劃自動恢復，無需重新建立。

**Why this priority**: 持久化讓工具能實際用於日常規劃，而非一次性玩具。雖然技術上是獨立功能，但對工具的實用性至關重要。

**Independent Test**: 使用者建立 3 個任務並規劃到今日容器，關閉瀏覽器分頁後重新開啟，檢查資料是否完整保留，即可驗證功能。

**Acceptance Scenarios**:

1. **Given** 使用者已建立 3 個任務並拖入今日容器，**When** 關閉瀏覽器分頁後重新開啟工具，**Then** 任務池與今日容器中的所有區塊完整顯示，位置與狀態與關閉前一致
2. **Given** 使用者清空瀏覽器儲存資料，**When** 重新開啟工具，**Then** 顯示空白狀態，無任何任務

---

### Edge Cases

- **空白任務名稱**：使用者未輸入任務名稱就嘗試新增任務時，系統應提示「請輸入任務名稱」或自動產生預設名稱（如「未命名任務」）
- **超長任務名稱**：任務名稱超過 50 字元時，區塊內顯示截斷文字（如「這是一個非常非常長的任務名...」），並提供完整文字的檢視方式
- **極端時長**：使用者選擇 8 小時或更長的任務時，單一區塊可能佔滿或超過今日容器，系統應正常顯示而不破版
- **容器溢出**：今日容器中的任務總時長超過 24 小時時，區塊溢出容器高度，使用者應能清楚看到「超載」狀態
- **快速連續操作**：使用者快速拖曳多個區塊時，系統應正確處理每次拖曳，不發生區塊重疊或位置錯誤
- **瀏覽器儲存限制**：使用者建立超過 100 個任務時，若超出瀏覽器儲存空間限制，系統應提示使用者清理舊任務

## Requirements *(mandatory)*

### Functional Requirements

- **FR-001**: 系統必須提供任務建立介面，包含任務名稱輸入欄位與時長選擇器
- **FR-002**: 系統必須支援至少 6 種預設時長選項（0.5hr, 1hr, 1.5hr, 2hr, 3hr, 4hr）
- **FR-003**: 系統必須在使用者點擊「新增」後立即在任務池中產生對應的時間區塊
- **FR-004**: 時間區塊必須清楚顯示任務名稱與時長，且區塊的視覺大小必須與時長成正比
- **FR-005**: 系統必須提供「任務池」區域，用於暫存尚未規劃到今日容器的任務區塊
- **FR-006**: 系統必須提供「今日容器」區域，用於容納使用者規劃的任務區塊
- **FR-007**: 今日容器必須有固定高度，代表一天的時間容量（建議 16 小時作為有效工作時間，可提供參考線標示 8hr、16hr、24hr）
- **FR-008**: 使用者必須能夠透過拖曳操作，將任務區塊從任務池移動到今日容器
- **FR-009**: 使用者必須能夠透過拖曳操作，將任務區塊從今日容器移回任務池，任務保留在 localStorage 中以供後續使用
- **FR-010**: 今日容器中的區塊必須自動依序堆疊，從底部向上填充，不允許空隙
- **FR-011**: 當今日容器中的區塊總高度超過容器高度時，系統必須允許視覺上的溢出（不阻擋），讓使用者感受「超載」
- **FR-012**: 使用者必須能夠刪除任務池中的區塊
- **FR-013**: 使用者必須能夠移除今日容器中的區塊，移除後剩餘區塊自動重新排列
- **FR-014**: 系統必須將使用者建立的任務與規劃狀態儲存於瀏覽器本地儲存
- **FR-015**: 系統必須在使用者重新開啟工具時自動載入之前儲存的資料
- **FR-016**: 系統必須在靜態網頁環境中運作，不依賴後端伺服器或外部 API
- **FR-017**: 任務名稱為空白時，系統必須提示使用者輸入或自動產生預設名稱
- **FR-018**: 任務名稱超過合理長度時，區塊內必須顯示截斷文字並保持版面完整

### Key Entities

- **Task（任務）**: 代表使用者需要完成的活動，包含名稱（字串）與預估時長（數值，以小時為單位）
- **TimeBlock（時間區塊）**: 任務的視覺化呈現，具有大小（對應時長）、顯示文字（任務名稱與時長）、位置狀態（任務池或今日容器）
- **DayContainer（今日容器）**: 代表一天的時間容量，具有固定高度（對應最大容量，建議 16-24 小時），容納已規劃的時間區塊
- **TaskPool（任務池）**: 暫存尚未規劃的時間區塊，無固定容量限制

## Success Criteria *(mandatory)*

### Measurable Outcomes

- **SC-001**: 使用者能在 30 秒內完成第一個任務的建立與視覺化（從開啟工具到看到區塊）
- **SC-002**: 使用者能在 2 分鐘內建立 3 個任務並全部規劃到今日容器，完成一次完整的規劃流程
- **SC-003**: 使用者在不參考說明文件的情況下，能在首次使用時成功完成任務建立與拖曳操作（可用性測試通過率達 90%）
- **SC-004**: 使用者一眼能判斷今日規劃的總時長是否超過個人可接受範圍（透過視覺溢出或填滿程度），無需計算數字
- **SC-005**: 系統在使用者關閉瀏覽器後重新開啟時，資料恢復完整率達 100%
- **SC-006**: 拖曳操作的回應時間在 100 毫秒以內，使用者感受流暢無延遲
- **SC-007**: 工具在桌面瀏覽器（Chrome、Firefox、Safari、Edge）上正常運作，相容性達 100%

## Assumptions

- 使用者使用桌面瀏覽器進行規劃（初版不優化手機觸控體驗，列入後續擴充）
- 使用者的瀏覽器支援現代 Web 標準（HTML5、CSS3、ES6+）及本地儲存功能
- 使用者規劃的任務數量不超過 100 個（足夠日常使用且不超出瀏覽器儲存限制）
- 今日容器的預設容量設定為 16 小時（代表一般人的有效工作時間），可透過參考線標示 8hr、16hr、24hr
- 使用者理解「時長」指的是任務的預估執行時間，而非精確的開始/結束時刻
- 工具不需要多使用者協作或雲端同步功能（僅本地單人使用）
- 工具不需要提供任務提醒、通知或行事曆整合功能

## Clarifications

### Session 2025-12-23

- Q: 當任務從今日容器移除後,該任務區塊的處理方式? → A: 任務保留在 localStorage 並回到任務池

## Out of Scope

以下功能在本 feature 中明確排除，不納入 MVP 範圍：

- 多天規劃或週視圖
- 精確時刻排程（幾點幾分開始/結束）
- 任務優先級或分類系統
- 任務模板或快速新增功能
- 顏色分類（工作/個人/休閒）
- 匯出功能（截圖或文字檔）
- 統計或數據分析
- 使用者帳號系統或雲端同步
- 提醒或通知功能
- 與他人協作或分享
- AI 建議或自動規劃
- 手機版優化（觸控拖曳）
- 鍵盤快捷鍵
